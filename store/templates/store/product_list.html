{% extends 'index.html' %} {% load crispy_forms_tags %} {% load thumbnail %}
{% block title %}Store{% endblock title %}
{% load static %}
{% block content %}
<style>
.filter-box{
  display:flex;

}
.filter-box .category-box{
  margin-right:30px;
  display:flex;
}


.category-i a{
  padding: 5px 10px;
  border: 2px solid #6D0069;
  border-radius: 6px; 
  color: #6D0069;
  font-weight: 600;
  transition: .3s;
}

.category-i a:hover{
background: #6D0069;
text-decoration:none;
color: white;
}
.price-form{
  display:flex;


}
.price-form button {
  margin-left: 10px;
  height: max-content;
  padding: 6px 12px;
  color: white;
  background: #6D0069;
  border: 2px solid #6D0069;
 transition: .3s;
}
.price-form button:hover{
  background: transparent;
  color: #6D0069;
  border: 2px solid #6D0069;
}

.price-form .textinput:focus{
  color: #6D0069;
   border-color: #6D0069;
    outline: 0;
    box-shadow: 0 0 0 0.2rem #6D0069;
}
.price-form .textinput{
  color: #6D0069;
   border-color: #6D0069;
    outline: 0;
   
}
#id_category{
  margin-right:30px;
  display:flex;
  padding: 5px 10px;
  margin-right:25px;
  border: 2px solid #6D0069;
  border-radius: 6px; 
  color: #6D0069;
  font-weight: 600;
  transition: .3s;
}
#div_id_category{
  width:400px;
  margin-right:10px
}
#id_category:hover{
background: #6D0069;
text-decoration:none;
color: white;
}
.card-title a:hover{
  color: #6D0069;
  text-decoration:none;
}
.card-title a{
  color:#6D0069;
}

</style>

<div id="carousel-example-2" class="carousel slide" data-ride="carousel">

  <ol class="carousel-indicators">
    <li data-target="#carousel-example-2" data-slide-to="0" class="active"></li>
    <li data-target="#carousel-example-2" data-slide-to="1"></li>
    <li data-target="#carousel-example-2" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner" role="listbox">
    <div class="carousel-item active">
      <div class="view hm-white-slight">
        <img class="d-block w-100" src="https://i.ytimg.com/vi/BditV3ei2L4/maxresdefault.jpg" alt="First slide">
        <div class="mask"></div>
      </div>
      <div class="carousel-caption">
        <h3 class="h3-responsive" style="color:#6D0069">First title</h3>
        <p style="color:#6D0069">First text</p>
      </div>
    </div>
    <div class="carousel-item">

      <div class="view hm-white-slight">
        <img class="d-block w-100" src="https://www.thecosmeticboxes.com/wp-content/uploads/2018/03/perfume-boxes5.jpg" alt="Second slide">
        <div class="mask"></div>
      </div>
      <div class="carousel-caption">
        <h3 class="h3-responsive" style="color:#6D0069">Second title</h3>
        <p style="color:#6D0069">Second text</p>
      </div>
    </div>
    <div class="carousel-item">

      <div class="view hm-white-slight">
        <img class="d-block w-100" src="https://pro2-bar-s3-cdn-cf.myportfolio.com/efb920ee-2935-4c2d-8b89-74c0283625cb/803e753e-da81-4a06-8346-23fe0de05d30_rw_1920.jpg?h=977fbad162d15359686431acfc6bb9a9" alt="Third slide">
        <div class="mask"></div>
      </div>
      <div class="carousel-caption">
        <h3 class="h3-responsive" style="color:#6D0069">Third title</h3>
        <p style="color:#6D0069">Third text</p>
      </div>
    </div>
  </div>

  <a class="carousel-control-prev" href="#carousel-example-2" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only" style="color:#6D0069">Ortga</span>
  </a>
  <a class="carousel-control-next" href="#carousel-example-2" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only" style="color:#6D0069">Keyingisi</span>
  </a>
  <!--/.Controls-->
</div>


</div>
</div>
</nav>

<div id="multi-item-example" class="carousel slide carousel-multi-item" data-ride="carousel" style="border:none">
  <center>
    <h1 class="font-weight-light" style="font-family: " Times New Roman", color:#6D0069">Bizning tovarlar</h1>
  </center>
  <!--Indicators-->
  <div class="carousel-inner" role="listbox" style="border:none">
    {% for p in  Users %}
    <!--First slide-->
    {% if forloop.counter0|divisibleby:4 %}
    <div class="carousel-item {% if forloop.counter0 == 0 %}active{% endif %}" style="border:none"> {% endif %}

      <div class="col-md-3" style="float:left" style="border:none">
        <div class="card mb-4" style="width:300px; height:300px; justify-content:center; display:flex; border:none">
          <img class="w3-round" src="{{p.image.url}}" alt="Cardimg">
        </div>
      </div>
      {% if forloop.counter|divisibleby:4 or forloop.last %}
    </div>{% endif %}
    {% endfor%}
    <!--/.First slide-->

    {% comment %} <div class="filter-box align-items-center"> {% endcomment %}
    {% comment %} <div class="category-box">
    {% for i in Categorya%}


        <div class="category-i form-check"><a href="{{ c.get_absolute_path }}" >{{ i.name}}</a></div>
      

    {% endfor%}
    </div> {% endcomment %}


<div class="r t-rec t-rec_pt_15 t-rec_pb_135">
<center>
  <image src="{% static 'image/logohappy2.png' %}" style="width:250px; heght:20px; display:flex"></center>
  <br>
  <h2 class="font-weight-light mb-2" style="text-align:center; color:#6D0069">Tovarlar</h2>
  <div class="row">
<div class="col-sm-10">
    <form class="form-group price-form align-items-end" style="width:350px">
      {{filter.form|crispy}}
      <button class="btn btn-info btn-sm mb-3" type="submit">
        Filter
      </button>
    </form>
</div>
</div>
</div>

  <div class="row">
    {% for product in products %}
    <!-- <div class="col-lg-4 col-12 mb-2 px-sm-2">
      <div class="card t-store__card__imgwrapper  t-store__card__imgwrapper_1-1">
        <img src="{% thumbnail product.image 0x200 %}" alt="No Image" class="img-aspect p-2" />
        <div class="card-body">
          <h3 class="card-subtitle font-weight-light">
            <a href="{% url 'store:product_details' product.slug %}">{{product.name}}</a>
          </h3>
          <h4 class="card-text">
            <span class="badge badge-warning">Rs.{{product.price}}</span>
          </h4> -->



      <div class="col d-flex justify-content-center">
        <div class="col-sm-6">
            <div class="t-store__card__imgwrapper  t-store__card__imgwrapper_1-1" style="width: 18rem;"
              style="border:none">
              <img class="js-product-img t-store__card__bgimg t-bgimg loaded" src="{% thumbnail product.image 0x200 %}"
                alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title"><a href="{% url 'store:product_details' product.slug %}">{{product.name}}</a></h5>
                <h5 class="card-title">UZS {{product.price}}</h5>
                <p class="card-text">{{product.description|truncatewords:23 }}</p>
              </div>
            </div>
        </div>
      </div>    


    {% empty %}
    
    <div class="col-12 text-center">
      <h3 class="font-weight-light my-4 py-4" style="color:#6D0069">Tovar aniqlanmadi</h3>
    </div>
    {% endfor %}
  </div>
{% if products|length != 0 %}
  <nav style="text-align:center">
    {% with page_obj as page %}
    <div class="mt-2">
      <p class="my-2">
        Page {{ page.number }} of {{ page.paginator.num_pages }}
      </p>
      <center>
      <ul class="pagination d-flex justify-content-center">
        {% if page.has_previous %}
        <li class="page-item">
          <a href="?page={{ page.previous_page_number }}" class="page-link" style="color:#6D0069">
            Ortga
          </a>
        </li>
        {% endif %}
        <li class="page-item active text-center" style="text-align:center">
          <a class="page-link" style="background:#6D0069; color:white; border-color:white">{{ page.number }}</a>
        </li>
        {% if page.has_next %}
        <li class="page-item text-center">
          <a href="?page={{ page.next_page_number }}" class="page-link "  style="background:#6D0069; color:white" >
            Keyingisi
          </a>
        </li>
        {% endif %}
      </ul>
    </div>
    {% endwith %}
  </nav>
  {% endif %}
  </center>
</div>
</div>  
<script> 
   document.querySelector("#div_id_price > div").className = "d-flex justify-space-between align-items-center";
  document.querySelectorAll("#div_id_price input").forEach((i) => {
    i.classList.add("form-control")
    i.style.minWidth = '10px'
  });
  document.querySelectorAll(".filter-form .form-control").forEach((i) => i.classList.add("form-control-sm"));
</script> 

{% endblock content %}